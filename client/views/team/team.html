<template name="Team">
  <div class="nav-panel dark-1 height-1-3 {{#if changeAthlete}}collapse{{/if}}">
  	<h3 class="uk-margin-small-bottom">Name: </h3><h1 class="bright uk-margin-small-top uk-text-right">TeamName{{Name}}</h1>
  	<h3 class="uk-margin-small-top uk-margin-small-bottom">Nation: </h3><h1 class="bright uk-margin-small-top uk-text-right">Nation{{NAT}}</h1>
  </div>
  {{> teamDetails collapse=collapse}}
  {{> athleteBlock athletes=myAthletes details=athleteBlockDetails overlay=true}}
  {{> athleteTabs athletes=allAthletes details=athleteTabsDetails}}
</template>

<template name="athleteBlock">
  <div class="nav-panel athlete-panel {{details.color}} height-{{details.heightString}} {{details.extraClasses}}" style="padding: {{details.marginPct}}%; {{details.extraStyles}}">
    <div class="block {{#if details.borders}}borders{{/if}}">
    	{{#each athletes}}
    		{{> athlete}}
    	{{/each}}
      {{#if overlay}}
      <div class="overlay-area {{#if dragOverlay}}visible{{/if}}">
      </div>
      {{/if}}
    </div>
  </div>
</template>

<template name="athleteTabs">
  <div class="nav-panel athlete-tab-panel {{details.color}} height-{{details.heightString}} {{details.extraClasses}}" style="{{details.extraStyles}}">
    <div>
      {{#each athletes}}
        {{> athleteTab}}
      {{/each}}
      <div class="uk-clearfix"></div>
    </div>
  </div>
</template>

<template name="athlete">
	<div class="athlete {{#unless IBUId}}dummy{{/unless}}" style="height: {{toPercent ../details.rows ../details.marginPct}}%; width: {{toPercent ../details.cols ../details.marginPct}}%; margin: {{../details.marginPct}}%;">
  		<div class="athlete-background" style="background-image: {{athleteBackground this}};">
  		</div>
  {{#if IBUId}}
  		<div class="athlete-data">
  			<div class="show-row"><span><span class="uk-text-bold large-text bright">{{FamilyName}}, {{GivenName}}</span></span></div>
  			<div class="show-row"><span>Value: <span class="uk-text-bold large-text bright">{{value}}</span></span></div>
  			<div class="show-row"><span>Points: <span class="uk-text-bold large-text bright">{{points}}</span></span></div>		
  		</div>
  {{/if}}
  	</div>
</template>

<template name="athleteTab">
  <div class="athlete-tab {{GenderId}}-tab {{#unless eligible}}disabled{{/unless}}">
    <div class="athlete-tab-background" style="background-image: url('images/{{NAT}}.png')"></div>
    <div class="athlete-tab-contents">
      <div class="uk-text-bold">{{FamilyName}}, {{abbreviate GivenName}}<br>{{NAT}} - {{value}} points</div>
    </div>
  </div>
</template>

<template name="teamDetails">
  <div class="nav-panel height-1-6 dark-2 overlay heading-block {{collapse}}">
      <h4 class="uk-float-left">Value: {{value}} / {{MAX_VALUE}}</h4><h4 class="uk-float-right">Transfers: {{transfers}}</h4>
      <h4 class="uk-float-left clear-left">M / W: {{toNum eligibility.genders.M}} / {{toNum eligibility.genders.W}}</h4><h4 class="uk-float-right clear-right">Save</h4>
      <div class="overlay-area {{#if dragOverlay}}visible{{/if}}">
          <div class="overlay-area-content" data-action="remove-athlete"><i class="uk-icon-trash"></i></div>
      </div>
  </div>
</template>

<template name="athleteInfo">
  {{#with athlete}}
  <div class="athlete-modal">
    <h2 class="uk-display-inline">{{GivenName}} {{FamilyName}}</h2><h3 class="uk-display-inline"> ({{GenderId}})</h3>
    <div class="uk-clearfix"></div>
    <h3 class="uk-display-inline">{{fullNation NAT}} <div class="flag-badge" style="background-image: url('images/{{NAT}}small.png');"><div></div></div></h3>
    <p>Value: <strong>{{value}}</strong></p>
    <p>Points this season: <strong>{{points}}</strong></p>
    <a data-action="show-results">Results this season</a>
    <h4>Seasons</h4>
    {{#each arrayify seasons}}
      <a class="uk-margin-large-right" data-action="show-season" data-SeasonId="{{key}}">{{key}}</a>
    {{/each}}
  </div>
  {{/with}}
</template>

<template name="athleteResults">
  {{#with athlete}}
  <div class="athlete-modal">
    <h2 class="uk-display-inline">{{GivenName}} {{FamilyName}}</h2>
    <div class="uk-clearfix"></div>
    <ul>
      {{#each results}}
        <li>
        {{#with raceDeets RaceId}}
          {{Organizer}} ({{Nat}}), {{ShortDescription}} - {{briefTime StartTime}}
        {{/with}}
        Position: {{Rank}} 
        Course Rank: {{courseRank}} 
        Shooting Rank: {{shootRank}} 
        Points: {{points}}
        </li>
      {{/each}}
    </ul>
  </div>  
  {{/with}}
</template>